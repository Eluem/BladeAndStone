[gd_scene load_steps=9 format=3 uid="uid://dkfnvdvf07hu4"]

[ext_resource type="Script" path="res://Assets/Scripts/RigidBodyHittable.gd" id="1_jcd05"]
[ext_resource type="Script" path="res://Assets/Scripts/SpritePolygonGenerator.gd" id="2_lp62i"]
[ext_resource type="Script" path="res://Assets/Scripts/CrackDamageVisualUpdater.gd" id="3_yfqxq"]
[ext_resource type="Texture2D" uid="uid://cci4u4dw01bm7" path="res://Assets/Art/Environment/RockTextureLong.png" id="4_gg6kl"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o1l7o"]
size = Vector2(200, 60)

[sub_resource type="ViewportTexture" id="ViewportTexture_h6eg2"]
viewport_path = NodePath("SubViewport")

[sub_resource type="Curve" id="Curve_xtueu"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.720524, 0.703297), -1.04853, -1.04853, 0, 0, Vector2(1, 0), -4.8652, 0.0, 0, 0]
point_count = 3

[sub_resource type="Gradient" id="Gradient_rnu0t"]
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[node name="DestructibleWall" type="RigidBody2D"]
position = Vector2(0, -252)
freeze = true
script = ExtResource("1_jcd05")
maxHealth = 60
health = 60
generateOutline = false
blockLineOfSight = true
blockAttacks = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-5, -3)
shape = SubResource("RectangleShape2D_o1l7o")

[node name="MainSprite" type="Sprite2D" parent="." node_paths=PackedStringArray("spritePolygon")]
texture_repeat = 2
scale = Vector2(0.116314, 0.107402)
texture = SubResource("ViewportTexture_h6eg2")
script = ExtResource("2_lp62i")
spritePolygon = NodePath("../poly_sprite")

[node name="Cracks" type="Node2D" parent="MainSprite"]
script = ExtResource("3_yfqxq")

[node name="Crack" type="Line2D" parent="MainSprite/Cracks"]
points = PackedVector2Array(0, 0, 171.949, -18.6218, 223.533, -83.7976, 275.118, -167.595, 378.287, -176.906, 447.067, -186.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack2" type="Line2D" parent="MainSprite/Cracks"]
rotation = -1.20673
points = PackedVector2Array(0, 0, 96.6731, 18.3654, 194.474, -64.904, 273.746, -39.9079, 320.31, -48.4507)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack3" type="Line2D" parent="MainSprite/Cracks"]
rotation = -2.08282
points = PackedVector2Array(0, 0, 171.949, -18.6218, 258.909, -61.5941, 305.244, -144.037, 433.362, -219.966, 463.771, -331.084)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack4" type="Line2D" parent="MainSprite/Cracks"]
rotation = -2.48647
points = PackedVector2Array(0, 0, 198.75, -23.5454, 276.033, -106.406, 307.934, -248.333, 454.433, -255.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack5" type="Line2D" parent="MainSprite/Cracks"]
rotation = -3.02781
points = PackedVector2Array(0, 0, 171.949, -18.6218, 223.533, -83.7976, 275.118, -167.595, 378.287, -176.906, 447.067, -186.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack6" type="Line2D" parent="MainSprite/Cracks"]
rotation = 1.64388
points = PackedVector2Array(0, 0, 104.029, 18.2453, 164.637, -46.535, 224.119, 0.832947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack7" type="Line2D" parent="MainSprite/Cracks"]
rotation = 0.901098
points = PackedVector2Array(0, 0, 114.589, -84.7288, 208.934, -53.8937, 251.077, -152.118, 368.181, -180.026, 372.413, -275.368, 472.955, -327.355)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="SubViewport" type="SubViewport" parent="."]
transparent_bg = true
size = Vector2i(1980, 1024)

[node name="MainSprite2" type="Sprite2D" parent="SubViewport"]
modulate = Color(0.621524, 0.621524, 0.621524, 1)
texture_repeat = 2
position = Vector2(990, 512)
texture = ExtResource("4_gg6kl")

[node name="poly_sprite" type="Polygon2D" parent="."]
visible = false
texture = SubResource("ViewportTexture_h6eg2")
texture_offset = Vector2(115.151, 54.9897)
texture_scale = Vector2(8.59743, 9.31083)
polygon = PackedVector2Array(-91.8879, -51.9824, -92.7021, -51.9824, -93.5163, -51.6602, -93.9815, -51.6602, -96.5404, -50.6936, -96.8894, -50.6936, -97.122, -50.4788, -97.4709, -50.4788, -97.9362, -50.1566, -98.1688, -50.1566, -99.2156, -49.4048, -99.4483, -49.4048, -99.4483, -49.19, -100.844, -47.9012, -100.96, -47.9012, -100.96, -47.6864, -101.426, -47.2568, -101.542, -47.2568, -102.24, -45.9679, -102.356, -45.9679, -102.472, -45.4309, -102.589, -45.4309, -102.705, -44.8939, -102.705, -44.0347, -102.821, -43.9273, -102.938, -43.9273, -102.938, -43.4977, -103.287, -42.6385, -103.403, -42.6385, -103.519, -42.3163, -103.519, -41.8867, -104.217, -40.2757, -104.333, -40.2757, -104.799, -38.772, -104.799, -38.4498, -105.613, -36.9462, -105.729, -36.9462, -106.543, -34.5834, -106.66, -34.5834, -107.125, -31.2539, -107.241, -31.2539, -107.358, -29.5355, -107.474, -29.5355, -107.474, -28.3541, -107.59, -28.3541, -107.59, -20.8359, -107.59, -20.2989, -107.474, -20.2989, -107.474, -18.4731, -107.241, -17.6139, -107.241, -15.6807, -107.59, -13.64, -107.707, -13.64, -107.59, -13.5326, -107.59, -13.4252, -107.939, -11.2772, -108.055, -11.2772, -108.172, -10.3106, -108.172, -9.45135, -108.404, -8.05513, -108.521, -8.05513, -108.521, -7.19592, -108.637, -6.55151, -108.753, -6.55151, -109.335, -2.14804, -109.451, -2.14804, -109.451, 1.07402, -109.917, 3.22205, -110.033, 3.22205, -110.382, 11.5994, -110.498, 11.5994, -110.382, 12.3512, -110.382, 14.2844, -110.149, 15.0362, -110.149, 16.1103, -110.265, 16.6473, -110.382, 16.6473, -110.382, 17.7213, -110.498, 17.7213, -110.498, 21.0507, -110.498, 21.1581, -110.731, 22.5544, -110.731, 23.8432, -110.614, 23.8432, -110.614, 24.3802, -110.382, 24.595, -110.382, 24.9172, -110.033, 25.3468, -110.033, 25.669, -109.219, 26.9578, -109.219, 27.1726, -108.521, 27.9245, -108.521, 28.1393, -108.288, 28.1393, -108.288, 28.3541, -106.776, 29.7503, -106.776, 29.9651, -102.356, 33.939, -102.356, 34.0464, -102.123, 34.0464, -102.007, 34.1538, -102.007, 34.2612, -101.775, 34.2612, -101.775, 34.476, -101.542, 34.5834, -101.309, 34.5834, -100.96, 34.9056, -100.728, 34.9056, -99.6809, 35.8722, -99.6809, 35.9796, -99.332, 36.087, -99.332, 36.1944, -98.983, 36.3018, -98.5178, 36.3018, -98.4015, 36.4092, -98.4015, 36.5166, -97.4709, 36.9462, -97.4709, 37.0536, -96.5404, 37.3758, -96.5404, 37.4832, -94.912, 37.9128, -94.912, 38.0202, -93.1673, 38.0202, -92.2368, 38.0202, -89.9105, 38.5572, -89.9105, 38.6646, -88.1658, 38.8794, -86.5374, 38.8794, -83.9785, 39.4164, -83.9785, 39.5238, -83.397, 39.5238, -83.397, 39.6312, -79.2097, 40.1683, -79.2097, 40.2757, -76.3018, 40.3831, -76.3018, 40.4905, -75.604, 40.3831, -75.3713, 40.3831, -75.0224, 40.4905, -75.0224, 40.5979, -74.4408, 40.5979, -74.4408, 40.7053, -71.8819, 40.9201, -71.8819, 41.0275, -65.252, 41.1349, -64.9031, 41.1349, -58.6221, 40.7053, -56.4122, 40.7053, -54.4348, 40.2757, -53.737, 40.2757, -53.2717, 40.1683, -53.2717, 40.0609, -52.6901, 40.0609, -47.456, 38.8794, -47.456, 38.772, -44.3155, 38.8794, -40.8261, 38.8794, -38.2672, 38.6646, -38.0346, 38.6646, -36.6388, 38.772, -36.6388, 38.8794, -33.2657, 38.9868, -33.2657, 39.0942, -28.9621, 39.2016, -28.9621, 39.309, -28.6132, 39.2016, -28.4969, 39.2016, -24.1933, 39.309, -24.1933, 39.4164, -23.8443, 39.309, -23.728, 39.309, -17.5634, 39.4164, -17.5634, 39.5238, -9.07247, 39.5238, -9.07247, 39.6312, 4.07098, 39.5238, 4.07098, 39.4164, 9.07247, 39.5238, 9.53773, 39.5238, 10.1193, 39.309, 11.9803, 39.309, 16.2839, 39.6312, 16.2839, 39.7386, 16.5166, 39.6312, 16.6329, 39.6312, 21.0528, 39.8461, 21.2854, 39.8461, 24.4259, 39.5238, 24.4259, 39.4164, 24.5422, 39.5238, 24.8911, 39.5238, 27.3337, 39.309, 28.4969, 39.309, 29.3111, 39.2016, 29.3111, 39.0942, 35.1268, 38.4498, 36.2899, 38.4498, 40.1283, 37.8054, 40.1283, 37.698, 43.6177, 37.3758, 44.7808, 37.3758, 45.595, 37.161, 46.6418, 37.161, 52.8064, 36.087, 52.8064, 35.9796, 53.6206, 35.9796, 53.6206, 35.8722, 72.5798, 36.4092, 73.0451, 36.4092, 76.8834, 36.087, 79.4423, 36.087, 82.6991, 35.55, 83.2807, 35.55, 85.4906, 34.9056, 85.8396, 34.9056, 87.7006, 34.0464, 87.9332, 34.0464, 88.7474, 33.2945, 88.98, 33.2945, 90.0269, 32.2205, 90.1432, 32.2205, 90.1432, 32.0057, 90.6084, 31.5761, 90.7247, 31.5761, 90.9574, 31.1465, 91.0737, 31.1465, 91.0737, 30.8243, 91.3063, 30.6095, 91.4226, 30.6095, 91.5389, 30.3947, 91.5389, 30.1799, 92.0042, 29.6429, 92.1205, 29.6429, 92.5858, 28.7837, 92.7021, 28.7837, 94.5631, 25.2394, 94.6794, 25.2394, 95.0284, 24.1654, 95.1447, 24.1654, 95.6099, 22.5544, 95.6099, 21.5878, 95.7262, 21.2655, 95.8425, 21.2655, 96.3078, 19.3323, 96.4241, 19.3323, 97.3546, 14.8214, 97.4709, 14.8214, 97.7036, 12.1364, 97.8199, 12.1364, 97.8199, 10.418, 97.9362, 10.418, 97.8199, 9.23655, 97.8199, 8.37734, 98.4015, 5.69229, 98.5178, 5.69229, 98.6341, 4.51087, 98.7504, 4.51087, 99.332, 0.107402, 99.4483, 0.107402, 99.9135, -5.15528, 100.03, -5.15528, 100.03, -6.55151, 100.146, -6.55151, 100.146, -10.6328, 99.7972, -12.566, 99.6809, -12.566, 99.4483, -14.8214, 99.332, -14.8214, 98.983, -18.4731, 98.983, -19.2249, 98.4015, -21.4804, 98.4015, -22.0174, 98.1688, -22.447, 98.1688, -22.984, 96.8894, -26.9578, 96.8894, -27.3874, 96.7731, -27.6022, 96.6567, -27.6022, 96.6567, -28.0319, 95.9589, -29.5355, 95.9589, -29.8577, 95.8425, -29.9651, 95.7262, -29.9651, 95.7262, -30.2873, 94.5631, -32.2205, 94.5631, -32.4353, 94.3305, -32.5427, 94.3305, -32.8649, 94.2142, -32.9723, 94.0978, -32.9723, 93.2836, -34.476, 93.2836, -34.6908, 92.9347, -35.013, 92.9347, -35.2278, 92.0042, -36.3018, 92.0042, -36.5166, 91.6553, -36.7314, 91.6553, -36.9462, 91.5389, -37.0536, 91.3063, -37.0536, 91.3063, -37.2684, 90.1432, -38.235, 90.1432, -38.3424, 89.9105, -38.3424, 89.2127, -38.9868, 89.2127, -39.0942, 88.98, -39.0942, 88.2822, -39.7386, 88.2822, -39.8461, 88.0495, -39.8461, 88.0495, -40.0609, 87.8169, -40.0609, 87.468, -40.3831, 87.468, -40.4905, 87.2353, -40.4905, 86.8864, -40.8127, 86.8864, -40.9201, 86.6538, -40.9201, 85.4906, -41.8867, 85.4906, -41.9941, 85.258, -41.9941, 85.1417, -42.2089, 84.909, -42.2089, 84.6764, -42.4237, 84.6764, -42.5311, 84.4438, -42.5311, 83.9785, -42.9607, 83.7459, -42.9607, 83.5133, -43.1755, 83.5133, -43.2829, 83.2807, -43.2829, 82.8154, -43.7125, 82.5828, -43.7125, 82.3502, -43.9273, 82.3502, -44.0347, 82.1175, -44.0347, 81.8849, -44.2495, 81.8849, -44.3569, 81.6523, -44.3569, 81.4196, -44.5717, 81.4196, -44.6791, 80.9544, -44.8939, 80.9544, -45.0013, 80.7218, -45.0013, 80.2565, -45.3235, 80.2565, -45.4309, 80.0239, -45.5383, 79.7912, -45.5383, 79.6749, -45.6457, 79.6749, -45.7531, 78.9771, -46.0754, 78.7444, -46.0754, 78.6281, -46.1828, 78.6281, -46.2902, 78.3955, -46.3976, 78.1629, -46.3976, 77.9302, -46.6124, 77.9302, -46.7198, 77.3487, -46.9346, 77.3487, -47.042, 76.9997, -47.042, 76.8834, -47.1494, 76.8834, -47.2568, 72.3472, -49.19, 72.3472, -49.2974, 70.9514, -49.6196, 70.9514, -49.727, 70.1372, -49.727, 69.9046, -49.8344, 69.9046, -49.9418, 69.5556, -49.9418, 69.5556, -50.0492, 68.0436, -50.264, 64.7868, -50.264, 63.2747, -49.8344, 62.8094, -49.8344, 62.5768, -49.727, 62.5768, -49.6196, 62.1116, -49.6196, 61.4137, -49.2974, 61.0647, -49.2974, 59.9016, -48.653, 59.9016, -48.5456, 59.669, -48.5456, 59.669, -48.4382, 58.9711, -48.2234, 58.6221, -48.2234, 55.0164, -46.7198, 55.0164, -46.6124, 53.737, -46.2902, 53.737, -46.1828, 50.1312, -45.5383, 50.1312, -45.4309, 49.4334, -45.4309, 49.4334, -45.3235, 43.8503, -44.8939, 43.8503, -44.7865, 41.6403, -44.6791, 36.9878, -44.6791, 31.2884, -44.8939, 31.2884, -45.0013, 21.7507, -45.0013, 18.8428, -45.0013, 18.8428, -44.8939, 17.5634, -44.8939, 15.7024, -44.4643, 15.7024, -44.3569, 13.4924, -44.2495, 11.9803, -44.2495, 10.8172, -44.1421, 10.8172, -44.0347, 2.20996, -43.3903, 2.20996, -43.2829, -2.44259, -43.1755, -2.44259, -43.0681, -3.25679, -43.1755, -3.48941, -43.1755, -5.00149, -42.9607, -6.51357, -42.9607, -12.0966, -42.1015, -12.0966, -41.9941, -15.586, -41.6719, -16.6329, -41.6719, -17.2144, -41.5645, -17.2144, -41.4571, -19.1918, -41.2423, -19.1918, -41.1349, -25.0075, -40.4905, -25.0075, -40.3831, -35.7083, -39.9535, -35.8246, -39.9535, -40.0119, -40.5979, -40.8261, -40.5979, -41.524, -40.8127, -42.4545, -40.8127, -43.8503, -41.1349, -45.1297, -41.1349, -45.4787, -41.2423, -45.4787, -41.3497, -46.2929, -41.4571, -46.2929, -41.5645, -46.8745, -41.5645, -47.6886, -41.7793, -47.6886, -41.8867, -56.0632, -43.8199, -56.0632, -43.9273, -56.6448, -43.9273, -58.9711, -44.4643, -58.9711, -44.5717, -60.4832, -44.7865, -60.4832, -44.8939, -61.9952, -45.1087, -62.9258, -45.1087, -63.6236, -45.3235, -64.2052, -45.3235, -65.601, -45.7531, -66.0662, -45.7531, -67.3457, -46.1828, -67.3457, -46.2902, -68.2762, -46.505, -68.7414, -46.505, -70.6025, -47.1494, -71.0677, -47.1494, -72.4635, -47.7938, -72.4635, -47.9012, -72.8124, -47.9012, -74.0919, -48.4382, -74.0919, -48.5456, -75.255, -48.8678, -75.255, -48.9752, -75.7203, -49.0826, -76.4181, -49.0826, -76.6508, -49.2974, -77.2323, -49.2974, -78.1629, -49.727, -78.1629, -49.8344, -78.8607, -50.0492, -79.6749, -50.0492, -79.7912, -50.1566, -79.7912, -50.264, -81.0707, -50.5862, -81.0707, -50.6936, -84.3275, -51.338, -84.3275, -51.4454, -86.5374, -51.6602, -86.5374, -51.7676, -86.7701, -51.6602, -87.8169, -51.6602, -88.5148, -51.7676, -88.5148, -51.875, -90.4921, -51.9824, -90.4921, -52.0898, -91.8879, -52.0898)
