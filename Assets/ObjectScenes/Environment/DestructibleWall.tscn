[gd_scene load_steps=8 format=3 uid="uid://8iy8vssh3tbp"]

[ext_resource type="Script" path="res://Assets/Scripts/RigidBodyHittable.gd" id="1_s0ws4"]
[ext_resource type="Script" path="res://Assets/Scripts/SpritePolygonGenerator.gd" id="2_5h8fq"]
[ext_resource type="Texture2D" uid="uid://cci4u4dw01bm7" path="res://Assets/Art/Environment/RockTextureLong.png" id="2_wsxbd"]
[ext_resource type="Script" path="res://Assets/Scripts/CrackDamageVisualUpdater.gd" id="3_s36pm"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o1l7o"]
size = Vector2(200, 60)

[sub_resource type="Curve" id="Curve_xtueu"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.720524, 0.703297), -1.04853, -1.04853, 0, 0, Vector2(1, 0), -4.8652, 0.0, 0, 0]
point_count = 3

[sub_resource type="Gradient" id="Gradient_rnu0t"]
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[node name="DestructibleWall" type="RigidBody2D"]
position = Vector2(0, -252)
collision_layer = 17
collision_mask = 17
freeze = true
script = ExtResource("1_s0ws4")
maxHealth = 40
health = 40
generateOutline = false
blockLineOfSight = true
blockAttacks = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-5, -3)
shape = SubResource("RectangleShape2D_o1l7o")

[node name="MainSprite" type="Sprite2D" parent="." node_paths=PackedStringArray("spritePolygon")]
modulate = Color(0.619608, 0.619608, 0.619608, 1)
texture_repeat = 2
scale = Vector2(0.116314, 0.107402)
texture = ExtResource("2_wsxbd")
script = ExtResource("2_5h8fq")
spritePolygon = NodePath("../poly_sprite")

[node name="Cracks" type="Node2D" parent="MainSprite"]
script = ExtResource("3_s36pm")

[node name="Crack" type="Line2D" parent="MainSprite/Cracks"]
points = PackedVector2Array(0, 0, 171.949, -18.6218, 223.533, -83.7976, 275.118, -167.595, 378.287, -176.906, 447.067, -186.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack2" type="Line2D" parent="MainSprite/Cracks"]
rotation = -1.20673
points = PackedVector2Array(0, 0, 96.6731, 18.3654, 194.474, -64.904, 273.746, -39.9079, 320.31, -48.4507)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack3" type="Line2D" parent="MainSprite/Cracks"]
rotation = -2.08282
points = PackedVector2Array(0, 0, 171.949, -18.6218, 258.909, -61.5941, 305.244, -144.037, 433.362, -219.966, 463.771, -331.084)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack4" type="Line2D" parent="MainSprite/Cracks"]
rotation = -2.48647
points = PackedVector2Array(0, 0, 198.75, -23.5454, 276.033, -106.406, 307.934, -248.333, 454.433, -255.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack5" type="Line2D" parent="MainSprite/Cracks"]
rotation = -3.02781
points = PackedVector2Array(0, 0, 171.949, -18.6218, 223.533, -83.7976, 275.118, -167.595, 378.287, -176.906, 447.067, -186.217, 498.651, -297.947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack6" type="Line2D" parent="MainSprite/Cracks"]
rotation = 1.64388
points = PackedVector2Array(0, 0, 104.029, 18.2453, 164.637, -46.535, 224.119, 0.832947)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="Crack7" type="Line2D" parent="MainSprite/Cracks"]
rotation = 0.901098
points = PackedVector2Array(0, 0, 114.589, -84.7288, 208.934, -53.8937, 251.077, -152.118, 368.181, -180.026, 372.413, -275.368, 472.955, -327.355)
width = 20.0
width_curve = SubResource("Curve_xtueu")
default_color = Color(0.0980392, 0.0980392, 0.0980392, 1)
gradient = SubResource("Gradient_rnu0t")
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
antialiased = true

[node name="poly_sprite" type="Polygon2D" parent="."]
visible = false
modulate = Color(0.619608, 0.619608, 0.619608, 1)
texture = ExtResource("2_wsxbd")
texture_offset = Vector2(111.661, 57.9971)
texture_scale = Vector2(8.59742, 9.31081)
polygon = PackedVector2Array(-91.8881, -51.9826, -92.7023, -51.9826, -93.5165, -51.6604, -93.9817, -51.6604, -96.5406, -50.6937, -96.8896, -50.6937, -97.1222, -50.4789, -97.4711, -50.4789, -97.9364, -50.1567, -98.169, -50.1567, -99.2158, -49.4049, -99.4485, -49.4049, -99.4485, -49.1901, -100.844, -47.9013, -100.961, -47.9013, -100.961, -47.6865, -101.426, -47.2569, -101.542, -47.2569, -102.24, -45.9681, -102.356, -45.9681, -102.473, -45.431, -102.589, -45.431, -102.705, -44.894, -102.705, -44.0348, -102.822, -43.9274, -102.938, -43.9274, -102.938, -43.4978, -103.287, -42.6386, -103.403, -42.6386, -103.519, -42.3164, -103.519, -41.8868, -104.217, -40.2757, -104.334, -40.2757, -104.799, -38.7721, -104.799, -38.4499, -105.613, -36.9463, -105.729, -36.9463, -106.544, -34.5834, -106.66, -34.5834, -107.125, -31.254, -107.242, -31.254, -107.358, -29.5355, -107.474, -29.5355, -107.474, -28.3541, -107.59, -28.3541, -107.59, -20.836, -107.59, -20.299, -107.474, -20.299, -107.474, -18.4731, -107.242, -17.6139, -107.242, -15.6807, -107.59, -13.6401, -107.707, -13.6401, -107.59, -13.5327, -107.59, -13.4253, -107.939, -11.2772, -108.056, -11.2772, -108.172, -10.3106, -108.172, -9.45138, -108.405, -8.05515, -108.521, -8.05515, -108.521, -7.19593, -108.637, -6.55152, -108.754, -6.55152, -109.335, -2.14804, -109.451, -2.14804, -109.451, 1.07402, -109.917, 3.22206, -110.033, 3.22206, -110.382, 11.5994, -110.498, 11.5994, -110.382, 12.3512, -110.382, 14.2845, -110.149, 15.0363, -110.149, 16.1103, -110.266, 16.6473, -110.382, 16.6473, -110.382, 17.7213, -110.498, 17.7213, -110.498, 21.0508, -110.498, 21.1582, -110.731, 22.5544, -110.731, 23.8432, -110.615, 23.8432, -110.615, 24.3803, -110.382, 24.5951, -110.382, 24.9173, -110.033, 25.3469, -110.033, 25.6691, -109.219, 26.9579, -109.219, 27.1727, -108.521, 27.9245, -108.521, 28.1393, -108.288, 28.1393, -108.288, 28.3541, -106.776, 29.7504, -106.776, 29.9652, -102.356, 33.939, -102.356, 34.0464, -102.124, 34.0464, -102.007, 34.1538, -102.007, 34.2612, -101.775, 34.2612, -101.775, 34.476, -101.542, 34.5834, -101.309, 34.5834, -100.961, 34.9056, -100.728, 34.9056, -99.6811, 35.8723, -99.6811, 35.9797, -99.3322, 36.0871, -99.3322, 36.1945, -98.9832, 36.3019, -98.518, 36.3019, -98.4016, 36.4093, -98.4016, 36.5167, -97.4711, 36.9463, -97.4711, 37.0537, -96.5406, 37.3759, -96.5406, 37.4833, -94.9122, 37.9129, -94.9122, 38.0203, -93.1675, 38.0203, -92.237, 38.0203, -89.9107, 38.5573, -89.9107, 38.6647, -88.166, 38.8795, -86.5376, 38.8795, -83.9787, 39.4165, -83.9787, 39.5239, -83.3971, 39.5239, -83.3971, 39.6313, -79.2098, 40.1683, -79.2098, 40.2757, -76.302, 40.3832, -76.302, 40.4906, -75.6041, 40.3832, -75.3715, 40.3832, -75.0225, 40.4906, -75.0225, 40.598, -74.441, 40.598, -74.441, 40.7054, -71.882, 40.9202, -71.882, 41.0276, -65.2522, 41.135, -64.9032, 41.135, -58.6223, 40.7054, -56.4123, 40.7054, -54.435, 40.2757, -53.7371, 40.2757, -53.2718, 40.1683, -53.2718, 40.0609, -52.6902, 40.0609, -47.4561, 38.8795, -47.4561, 38.7721, -44.3156, 38.8795, -40.8262, 38.8795, -38.2673, 38.6647, -38.0347, 38.6647, -36.6389, 38.7721, -36.6389, 38.8795, -33.2658, 38.9869, -33.2658, 39.0943, -28.9622, 39.2017, -28.9622, 39.3091, -28.6132, 39.2017, -28.4969, 39.2017, -24.1933, 39.3091, -24.1933, 39.4165, -23.8444, 39.3091, -23.7281, 39.3091, -17.5634, 39.4165, -17.5634, 39.5239, -9.07249, 39.5239, -9.07249, 39.6313, 4.07099, 39.5239, 4.07099, 39.4165, 9.07249, 39.5239, 9.53775, 39.5239, 10.1193, 39.3091, 11.9803, 39.3091, 16.284, 39.6313, 16.284, 39.7387, 16.5166, 39.6313, 16.6329, 39.6313, 21.0528, 39.8461, 21.2855, 39.8461, 24.4259, 39.5239, 24.4259, 39.4165, 24.5423, 39.5239, 24.8912, 39.5239, 27.3338, 39.3091, 28.4969, 39.3091, 29.3111, 39.2017, 29.3111, 39.0943, 35.1268, 38.4499, 36.29, 38.4499, 40.1283, 37.8055, 40.1283, 37.6981, 43.6178, 37.3759, 44.7809, 37.3759, 45.5951, 37.1611, 46.6419, 37.1611, 52.8066, 36.0871, 52.8066, 35.9797, 53.6208, 35.9797, 53.6208, 35.8723, 72.5799, 36.4093, 73.0452, 36.4093, 76.8836, 36.0871, 79.4425, 36.0871, 82.6993, 35.5501, 83.2808, 35.5501, 85.4908, 34.9056, 85.8397, 34.9056, 87.7008, 34.0464, 87.9334, 34.0464, 88.7476, 33.2946, 88.9802, 33.2946, 90.027, 32.2206, 90.1433, 32.2206, 90.1433, 32.0058, 90.6086, 31.5762, 90.7249, 31.5762, 90.9576, 31.1466, 91.0739, 31.1466, 91.0739, 30.8244, 91.3065, 30.6096, 91.4228, 30.6096, 91.5391, 30.3948, 91.5391, 30.18, 92.0044, 29.643, 92.1207, 29.643, 92.5859, 28.7837, 92.7023, 28.7837, 94.5633, 25.2395, 94.6796, 25.2395, 95.0285, 24.1654, 95.1449, 24.1654, 95.6101, 22.5544, 95.6101, 21.5878, 95.7264, 21.2656, 95.8427, 21.2656, 96.308, 19.3324, 96.4243, 19.3324, 97.3548, 14.8215, 97.4711, 14.8215, 97.7038, 12.1364, 97.8201, 12.1364, 97.8201, 10.418, 97.9364, 10.418, 97.8201, 9.23657, 97.8201, 8.37736, 98.4016, 5.69231, 98.518, 5.69231, 98.6343, 4.51088, 98.7506, 4.51088, 99.3322, 0.107402, 99.4485, 0.107402, 99.9137, -5.1553, 100.03, -5.1553, 100.03, -6.55152, 100.146, -6.55152, 100.146, -10.6328, 99.7974, -12.566, 99.6811, -12.566, 99.4485, -14.8215, 99.3322, -14.8215, 98.9832, -18.4731, 98.9832, -19.225, 98.4016, -21.4804, 98.4016, -22.0174, 98.169, -22.447, 98.169, -22.984, 96.8896, -26.9579, 96.8896, -27.3875, 96.7732, -27.6023, 96.6569, -27.6023, 96.6569, -28.0319, 95.9591, -29.5355, 95.9591, -29.8578, 95.8427, -29.9652, 95.7264, -29.9652, 95.7264, -30.2874, 94.5633, -32.2206, 94.5633, -32.4354, 94.3307, -32.5428, 94.3307, -32.865, 94.2143, -32.9724, 94.098, -32.9724, 93.2838, -34.476, 93.2838, -34.6908, 92.9349, -35.0131, 92.9349, -35.2279, 92.0044, -36.3019, 92.0044, -36.5167, 91.6554, -36.7315, 91.6554, -36.9463, 91.5391, -37.0537, 91.3065, -37.0537, 91.3065, -37.2685, 90.1433, -38.2351, 90.1433, -38.3425, 89.9107, -38.3425, 89.2128, -38.9869, 89.2128, -39.0943, 88.9802, -39.0943, 88.2823, -39.7387, 88.2823, -39.8461, 88.0497, -39.8461, 88.0497, -40.0609, 87.8171, -40.0609, 87.4681, -40.3832, 87.4681, -40.4906, 87.2355, -40.4906, 86.8866, -40.8128, 86.8866, -40.9202, 86.6539, -40.9202, 85.4908, -41.8868, 85.4908, -41.9942, 85.2582, -41.9942, 85.1418, -42.209, 84.9092, -42.209, 84.6766, -42.4238, 84.6766, -42.5312, 84.444, -42.5312, 83.9787, -42.9608, 83.7461, -42.9608, 83.5135, -43.1756, 83.5135, -43.283, 83.2808, -43.283, 82.8156, -43.7126, 82.5829, -43.7126, 82.3503, -43.9274, 82.3503, -44.0348, 82.1177, -44.0348, 81.8851, -44.2496, 81.8851, -44.357, 81.6524, -44.357, 81.4198, -44.5718, 81.4198, -44.6792, 80.9545, -44.894, 80.9545, -45.0014, 80.7219, -45.0014, 80.2567, -45.3236, 80.2567, -45.431, 80.024, -45.5384, 79.7914, -45.5384, 79.6751, -45.6458, 79.6751, -45.7533, 78.9772, -46.0755, 78.7446, -46.0755, 78.6283, -46.1829, 78.6283, -46.2903, 78.3956, -46.3977, 78.163, -46.3977, 77.9304, -46.6125, 77.9304, -46.7199, 77.3488, -46.9347, 77.3488, -47.0421, 76.9999, -47.0421, 76.8836, -47.1495, 76.8836, -47.2569, 72.3473, -49.1901, 72.3473, -49.2975, 70.9515, -49.6197, 70.9515, -49.7271, 70.1373, -49.7271, 69.9047, -49.8345, 69.9047, -49.9419, 69.5558, -49.9419, 69.5558, -50.0493, 68.0437, -50.2641, 64.7869, -50.2641, 63.2748, -49.8345, 62.8096, -49.8345, 62.5769, -49.7271, 62.5769, -49.6197, 62.1117, -49.6197, 61.4138, -49.2975, 61.0648, -49.2975, 59.9017, -48.6531, 59.9017, -48.5457, 59.6691, -48.5457, 59.6691, -48.4383, 58.9712, -48.2235, 58.6223, -48.2235, 55.0165, -46.7199, 55.0165, -46.6125, 53.7371, -46.2903, 53.7371, -46.1829, 50.1313, -45.5384, 50.1313, -45.431, 49.4334, -45.431, 49.4334, -45.3236, 43.8504, -44.894, 43.8504, -44.7866, 41.6404, -44.6792, 36.9879, -44.6792, 31.2885, -44.894, 31.2885, -45.0014, 21.7507, -45.0014, 18.8429, -45.0014, 18.8429, -44.894, 17.5634, -44.894, 15.7024, -44.4644, 15.7024, -44.357, 13.4924, -44.2496, 11.9803, -44.2496, 10.8172, -44.1422, 10.8172, -44.0348, 2.20997, -43.3904, 2.20997, -43.283, -2.44259, -43.1756, -2.44259, -43.0682, -3.25679, -43.1756, -3.48942, -43.1756, -5.0015, -42.9608, -6.51358, -42.9608, -12.0967, -42.1016, -12.0967, -41.9942, -15.5861, -41.672, -16.6329, -41.672, -17.2145, -41.5646, -17.2145, -41.4572, -19.1918, -41.2424, -19.1918, -41.135, -25.0075, -40.4906, -25.0075, -40.3832, -35.7084, -39.9535, -35.8247, -39.9535, -40.012, -40.598, -40.8262, -40.598, -41.5241, -40.8128, -42.4546, -40.8128, -43.8504, -41.135, -45.1298, -41.135, -45.4788, -41.2424, -45.4788, -41.3498, -46.293, -41.4572, -46.293, -41.5646, -46.8745, -41.5646, -47.6887, -41.7794, -47.6887, -41.8868, -56.0633, -43.82, -56.0633, -43.9274, -56.6449, -43.9274, -58.9712, -44.4644, -58.9712, -44.5718, -60.4833, -44.7866, -60.4833, -44.894, -61.9954, -45.1088, -62.9259, -45.1088, -63.6238, -45.3236, -64.2053, -45.3236, -65.6011, -45.7533, -66.0664, -45.7533, -67.3458, -46.1829, -67.3458, -46.2903, -68.2763, -46.5051, -68.7416, -46.5051, -70.6026, -47.1495, -71.0679, -47.1495, -72.4636, -47.7939, -72.4636, -47.9013, -72.8126, -47.9013, -74.092, -48.4383, -74.092, -48.5457, -75.2552, -48.8679, -75.2552, -48.9753, -75.7204, -49.0827, -76.4183, -49.0827, -76.6509, -49.2975, -77.2325, -49.2975, -78.163, -49.7271, -78.163, -49.8345, -78.8609, -50.0493, -79.6751, -50.0493, -79.7914, -50.1567, -79.7914, -50.2641, -81.0709, -50.5863, -81.0709, -50.6937, -84.3277, -51.3382, -84.3277, -51.4456, -86.5376, -51.6604, -86.5376, -51.7678, -86.7702, -51.6604, -87.8171, -51.6604, -88.515, -51.7678, -88.515, -51.8752, -90.4923, -51.9826, -90.4923, -52.09, -91.8881, -52.09)
